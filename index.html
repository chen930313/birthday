<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±ªæ±ªéšŠå°ˆå±¬æŒ‘æˆ° ğŸ¾</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        body { 
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif; 
            background-color: #e0f2fe; 
            display: flex; justify-content: center; align-items: flex-start;
            min-height: 100vh; margin: 0; color: #334155; overflow-x: hidden;
            padding-top: 50px;
        }
        .card { 
            background: rgba(255, 255, 255, 0.95); 
            border-radius: 30px; padding: 30px 20px; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.1); 
            width: 85%; max-width: 350px;
            text-align: center;
            transition: all 0.5s ease;
            border: 5px solid #ffffff;
        }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .score-board { 
            font-size: 18px; font-weight: bold; color: #0284c7; 
            margin-bottom: 20px; background: #f0f9ff; 
            padding: 5px 15px; border-radius: 20px; display: inline-block;
        }
        .question { 
            font-size: 20px; margin-bottom: 25px; min-height: 80px; 
            font-weight: bold; line-height: 1.5; color: #1e293b;
            display: flex; align-items: center; justify-content: center;
        }
        .btn { 
            display: block; width: 100%; padding: 15px; margin: 12px 0; 
            border: 2px solid #bae6fd; background: white; border-radius: 15px; 
            font-size: 17px; cursor: pointer; transition: 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.02);
            -webkit-tap-highlight-color: transparent;
        }
        .btn:active { transform: scale(0.98); background-color: #f0f9ff; }
        .btn.selected { background-color: #7dd3fc; color: white; border-color: #0ea5e9; box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3); }
        
        .confirm-btn { 
            background: linear-gradient(135deg, #fb7185 0%, #f43f5e 100%);
            color: white; border: none; margin-top: 20px; 
            font-weight: bold; font-size: 18px; box-shadow: 0 4px 15px rgba(251, 113, 133, 0.4);
            display: none; /* åˆå§‹éš±è— */
        }
        #feedback { min-height: 50px; margin-top: 15px; font-weight: bold; font-size: 15px; }
        .success { color: #059669; }
        .error { color: #dc2626; }
        img { max-width: 100%; height: auto; border-radius: 20px; margin-top: 15px; }
    </style>
</head>
<body>

<audio id="bgMusic" loop><source src="recall.mp3" type="audio/mpeg"></audio>
<audio id="correctSound"><source src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
<audio id="wrongSound"><source src="https://assets.mixkit.co/active_storage/sfx/2014/2014-preview.mp3"></audio>

<div class="card fade-in" id="game-card">
    <div class="score-board">å¾—åˆ†ï¼š<span id="score">0</span></div>
    <div id="game-content">
        <div class="question" id="question">ä½ ä»¥ç‚ºä½ è¦æ‹¿åˆ°ä½ çš„ç¦®ç‰©äº†å—?<br>å˜¿å˜¿~å¤©ä¸‹æ²’æœ‰ç™½åƒçš„åˆé¤!<br>æ±ªæ±ªéšŠï¼Œæº–å‚™å¥½æ¥å—æŒ‘æˆ°äº†å—ï¼Ÿ</div>
        <div id="options">
            <button class="btn" onclick="startGame()">é»æˆ‘é–‹å§‹æŒ‘æˆ°! ğŸ¾</button>
        </div>
        <button id="confirm-btn" class="btn confirm-btn" onclick="checkMulti()">ç¢ºèªé€å‡º</button>
        <div id="feedback"></div>
    </div>
</div>

<script>
    let score = 0;
    let currentIdx = 0;
    let selectedArr = [];
    let isProcessing = false;
    let reached100 = false;

    const quizData = [
        { q: "ç¬¬ä¸€æ¬¡ç´„æœƒé™³æ€ç‘œçš„æŒ‡ç”²æ˜¯ä»€éº¼è‰²ç³»çš„ï¼Ÿ", a: ["é»‘è‰²", "ç°è‰²", "ç¶ è‰²", "æµ·é‚Šè‰²"], ans: [3], multi: false },
        { q: "é™³æ€ç‘œé€™è¼©å­çµ•å°ä¸æƒ³åšçš„äº‹æƒ…æ˜¯ï¼Ÿ", a: ["ç”Ÿå°å­©", "å–®èº«ä¸€è¼©å­"], ans: [0], multi: false },
        { q: "é™³æ€ç‘œä»¥å¾Œé€€ä¼‘æœƒåšä»€éº¼ï¼Ÿ(è¤‡é¸)", a: ["uberå¸æ©Ÿ", "è³£æé®‘è‡", "èººåœ¨å®¶çœ‹netflix"], ans: [0, 1, 2], multi: true },
        { q: "é™³æ€ç‘œç•«å®Œå¦å¸¸å¸¸å¿˜è¨˜åšä»€éº¼ï¼Ÿ(è¤‡é¸)", a: ["æ”¶æ±è¥¿", "å¡—å£ç´…", "åˆ·ç«æ¯›", "å¡—è…®ç´…"], ans: [0, 1], multi: true },
        { q: "æˆ‘å€‘ç¬¬ä¸€æ¬¡è¦‹é¢æ˜¯å¹¾æœˆå¹¾è™Ÿï¼Ÿ", a: ["8/5", "8/6", "8/7", "8/8"], ans: [2], multi: false },
        { q: "ç¬¬ä¸€æ¬¡è¦ªè¦ªåœ¨å“ªè£¡ï¼Ÿ", a: ["æµ·é‚Š", "æ·¡æ°´è€è¡—", "æˆ‘å®¶æ¨“ä¸‹"], ans: [2], multi: false },
        { q: "é™³æ€ç‘œæ´—æ¾¡éƒ½å…ˆæ´—å“ªè£¡ï¼Ÿ", a: ["é ­", "è‡‰", "åˆ·ç‰™", "å˜å±çª©"], ans: [0], multi: false },
        { q: "èŠå¤©å®¤é™³æ€ç‘œå®Œå…¨æ²’ç½µéçš„é«’è©±ï¼Ÿ", a: ["å¹¹ä½ å¨˜", "é æ¯", "æ©Ÿæ°"], ans: [0], multi: false },
        { q: "ä½ å› ç‚ºä»€éº¼äº‹æƒ…èªªéé™³æ€ç‘œå¯æ„›ï¼Ÿ(è¤‡é¸)", a: ["è‡‰å¾ˆè‡­", "åˆ·ç‰™å›è¨Šæ¯", "ç”Ÿæ°£æŠ±æ€¨", "å˜´å”‡è·Ÿè…®ç´…", "ä¸æ•¢æ‰“èŸ‘è‚", "å¿˜è¨˜åšäº‹æƒ…"], ans: [0, 1, 2, 3, 4, 5], multi: true },
        { q: "é™³æ€ç‘œä»¥å¾Œæƒ³ä½ä»€éº¼æˆ¿å­ï¼Ÿ", a: ["ç ´èˆŠçš„é€å¤©", "å¾ˆæ¼‚äº®çš„å…¬å¯“"], ans: [1], multi: false },
        { q: "é™³æ€ç‘œçš„å¤¢æƒ³æ˜¯ä»€éº¼ï¼Ÿ", a: ["æº–æ™‚ä¸‹ç­", "ç’°éŠä¸–ç•Œ", "çµ„å®¶åº­"], ans: [0], multi: false },
        { q: "é™³æ€ç‘œå–œæ­¡çœ‹ä»€éº¼reelsï¼Ÿ", a: ["æç¬‘", "è·³èˆ", "æ—…éŠ", "åƒé£¯"], ans: [0], multi: false },
        { q: "é™³æ€ç‘œå–œæ­¡æ€æ¨£çš„ç”·ç”Ÿï¼Ÿ", a: ["185æ’çƒç”· æœ‰è…¹è‚Œ", "178ç±ƒçƒå°å­ æ•´å¤©è€å•Ÿ"], ans: [1], multi: false },
        { q: "åŸºéš†å¤œå¸‚é‚£å¤©æ—©ä¸Šæˆ‘åŸæœ¬åœ¨å¹¹å˜›ï¼Ÿ", a: ["è·Ÿæœ‹å‹åƒé£¯", "æ‰“çƒ", "ç¡è¦º", "æ´—è»Š"], ans: [1], multi: false },
        { q: "ç¬¬ä¸€æ¬¡çœ‹åˆ°æˆ‘çœ¼ç›è…«è…«æ˜¯å› ç‚ºä»€éº¼ï¼Ÿ", a: ["è·Ÿçˆ¸çˆ¸åµæ¶", "æ±è¥¿å¼„å£äº†", "emo", "è·Ÿåª½åª½åµæ¶"], ans: [3], multi: false },
        { q: "é€™é¦–æ­Œä½ æœ‰æ²’æœ‰è½éï¼Ÿ", a: ["æœ‰", "æ²’æœ‰"], ans: [0], multi: false }
    ];

    function startGame() {
        document.getElementById('bgMusic').play();
        renderQuestion();
    }

    function renderQuestion() {
        if (currentIdx >= quizData.length) {
            checkFinalResult();
            return;
        }
        const card = document.getElementById('game-card');
        card.classList.remove('fade-in');
        void card.offsetWidth;
        card.classList.add('fade-in');

        isProcessing = false;
        selectedArr = [];
        let data = quizData[currentIdx];
        document.getElementById('question').innerText = data.q;
        
        // ä¿®æ­£ï¼šåªæœ‰è¤‡é¸é¡Œæ‰é¡¯ç¤ºæŒ‰éˆ•
        document.getElementById('confirm-btn').style.display = data.multi ? "block" : "none";
        
        let html = "";
        data.a.forEach((opt, i) => {
            html += `<button class="btn" id="btn-${i}" onclick="handleSelect(${i})">${opt}</button>`;
        });
        document.getElementById('options').innerHTML = html;
        document.getElementById('feedback').innerText = "";
    }

    function handleSelect(i) {
        if (isProcessing) return;
        let data = quizData[currentIdx];
        if (data.multi) {
            let btn = document.getElementById(`btn-${i}`);
            btn.classList.toggle('selected');
            if (selectedArr.includes(i)) {
                selectedArr = selectedArr.filter(item => item !== i);
            } else {
                selectedArr.push(i);
            }
        } else {
            validate([i]);
        }
    }

    function checkMulti() {
        if (isProcessing || selectedArr.length === 0) return;
        validate(selectedArr);
    }

    function validate(userAns) {
        isProcessing = true;
        let data = quizData[currentIdx];
        let correctAns = [...data.ans].sort();
        userAns.sort();
        
        let isCorrect = JSON.stringify(userAns) === JSON.stringify(correctAns);
        let feedbackEl = document.getElementById('feedback');
        
        if (isCorrect) {
            score += 10;
            document.getElementById('score').innerText = score;
            document.getElementById('correctSound').play();
            feedbackEl.innerHTML = "<span class='success'>âœ… ç­”å°äº†ï¼</span>";
            
            if (score === 100 && !reached100) {
                reached100 = true;
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
                setTimeout(() => {
                    alert("æ­å–œä½ å·²ç¶“é€šé—œæ‹‰ï¼ç«Ÿç„¶æ¯”æˆ‘é æœŸçš„æ—©ï¼Œä½†ç¹¼çºŒé—–ä¸‹å»ï¼Œçœ‹ä½ å¯ä»¥å¾—å¹¾åˆ†å§ï¼");
                    currentIdx++;
                    renderQuestion();
                }, 500);
                return;
            }
        } else {
            document.getElementById('wrongSound').play();
            let correctTexts = data.ans.map(idx => data.a[idx]).join("ã€");
            feedbackEl.innerHTML = `<span class='error'>âŒ éŒ¯äº†ï¼æ­£ç¢ºæ˜¯ï¼š${correctTexts}</span>`;
        }

        currentIdx++;
        setTimeout(renderQuestion, 2000);
    }

    function checkFinalResult() {
        const gameCard = document.getElementById('game-card');
        if (score >= 100) {
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            gameCard.innerHTML = `
                <h1 style="color: #0284c7;">ğŸ‰ æŒ‘æˆ°æˆåŠŸï¼</h1>
                <p style="font-size: 24px;">æœ€çµ‚å¾—åˆ†ï¼š${score}</p>
                <p>æ­å–œéé—œï¼å¯†ç¢¼æ˜¯ä½ çš„ç”Ÿæ—¥+æˆ‘çš„ç”Ÿæ—¥â¤ï¸<br>ç”Ÿæ—¥å¿«æ¨‚ï¼ç¦®ç‰©åœ¨é‚£é‚Šç­‰ä½ å›‰ï¼</p>
                <img src="us.jpg" style="width: 100%; border-radius: 20px; margin: 15px 0; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
            `;
        } else {
            gameCard.innerHTML = `
                <h1 style="color: #dc2626;">âŒ æŒ‘æˆ°å¤±æ•—</h1>
                <p style="font-size: 24px;">å¾—åˆ†ï¼š${score}</p>
                <p>ğŸ™„ æ‰æ‹¿é€™é»åˆ†æ•¸...<br>ä½ æ˜¯ä¸æ˜¯ä¸æ„›æˆ‘äº†ï¼Ÿå†çµ¦ä½ ä¸€æ¬¡æ©Ÿæœƒï¼</p>
                <button class="btn" onclick="location.reload()">é‡æ–°æŒ‘æˆ°</button>
            `;
        }
    }
</script>
</body>
</html>